<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Prompt Framework Library</title>
<style>
  body{margin:0;background:#0e0e0e;color:#f5f5f5;font-family:Arial, sans-serif}
  .wrap{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
  .side{background:#141414;padding:18px;border-right:1px solid #222}
  .side h2{color:#e2b714;font-size:18px;margin:0 0 12px}
  .side button{display:block;width:100%;margin:8px 0;padding:10px;border:1px solid #333;background:#1a1a1a;color:#f5f5f5;border-radius:8px;cursor:pointer}
  .main{padding:24px}
  h1{color:#e2b714;margin:0 0 10px}
  .row{margin:10px 0}
  textarea,input{width:100%;background:#121212;border:1px solid #333;color:#f5f5f5;border-radius:8px;padding:10px}
  .btn{padding:10px 14px;border:1px solid #333;background:#222;color:#f5f5f5;border-radius:8px;cursor:pointer;margin-right:8px}
  pre{background:#121212;border:1px solid #333;border-radius:8px;padding:14px;white-space:pre-wrap}
  a{color:#e2b714;text-decoration:none}
</style>
</head>
<body>
<div class="wrap">
  <div class="side">
    <h2>Categories</h2>
    <button onclick="loadCat('strategy')">Strategy</button>
    <button onclick="loadCat('marketing')">Marketing</button>
    <button onclick="loadCat('ux')">UX Writing</button>
    <button onclick="loadCat('analysis')">Analysis</button>
    <div style="margin-top:18px"><a href="../../">← Back to portfolio</a></div>
  </div>
  <div class="main">
    <h1>Prompt Framework Library</h1>
    <div class="row"><input id="vars" placeholder="Variables (comma-separated): product, audience, budget"/></div>
    <div class="row"><textarea id="template" rows="10" placeholder="Select a template from the left"></textarea></div>
    <div class="row">
      <button class="btn" onclick="insertTemplate()">Insert Example Vars</button>
      <button class="btn" onclick="run()">Run</button>
      <button class="btn" onclick="copyOut()">Copy Output</button>
      <button class="btn" onclick="downloadOut()">Download .md</button>
    </div>
    <div class="row"><pre id="out">Output will appear here…</pre></div>
  </div>
</div>

<script>
const API_URL = "https://a8ad6bfd-0b9e-4c04-b86b-ee6f5673b396-00-3j9vlmht90fsh.picard.replit.dev/generate";

// Template catalog
const TEMPLATES = {
  strategy: [
    {
      name: "Product Brief (ToC)",
      vars: "product, audience, budget, deadline",
      body:
`Role: Senior AI Product Strategist
Task: Convert a plain request into a structured brief.

Input:
- Product: {product}
- Audience: {audience}
- Budget: {budget}
- Deadline: {deadline}

Output JSON keys only:
prompt, brief.problem[], brief.users[], brief.solution[], brief.value[], brief.risks[], brief.next_actions[]

Constraints:
- Keep lists 3–5 bullets each
- Use business language, not academic`
    },
    {
      name: "North Star & Risks",
      vars: "product, metric, horizon",
      body:
`Role: Head of Product Strategy
Define a north star and top risks.

Product: {product}
Primary metric: {metric}
Horizon: {horizon}

Return JSON with:
prompt, brief.value[], brief.risks[], brief.next_actions[]`
    }
  ],
  marketing: [
    { name: "Positioning Statement",
      vars: "product, audience, differentiator",
      body:
`Write a crisp positioning for {product} for {audience}.
Highlight the unique differentiator: {differentiator}.
Return JSON with brief.value[] and brief.next_actions[]`},
    { name: "Launch Checklist",
      vars: "product, channel, budget",
      body:
`Create a lean go-to-market checklist for {product} on {channel} with budget {budget}.
Return JSON with brief.solution[] and brief.next_actions[]`}
  ],
  ux: [
    { name: "Onboarding Flow",
      vars: "product, step_count",
      body:
`Design an onboarding flow for {product} in {step_count} steps.
Return JSON with brief.solution[] and brief.risks[]`},
    { name: "Tone & Voice",
      vars: "brand, tone",
      body:
`Rewrite a welcome message for {brand} in a {tone} voice.
Return JSON with brief.value[] and brief.next_actions[]`}
  ],
  analysis: [
    { name: "Churn Hypotheses",
      vars: "product, segment",
      body:
`List leading churn hypotheses for {product} in segment {segment}.
Return JSON with brief.problem[] and brief.next_actions[]`},
    { name: "ROI Back-of-Napkin",
      vars: "initiative, cost, time_saving",
      body:
`Estimate ROI for {initiative} with cost {cost} and time saving {time_saving}.
Return JSON with brief.value[] and brief.risks[]`}
  ]
};

let current = TEMPLATES.strategy[0];

function loadCat(cat){
  current = TEMPLATES[cat][0];
  document.getElementById('vars').value = current.vars;
  document.getElementById('template').value = current.body;
}

function insertTemplate(){
  const vars = document.getElementById('vars').value.split(',').map(s=>s.trim());
  let text = document.getElementById('template').value;
  const examples = {
    product: "AI assistant for premium auto sales",
    audience: "sales managers at luxury dealerships",
    budget: "$5k",
    deadline: "3 weeks",
    metric: "test-drive bookings",
    horizon: "90 days",
    differentiator: "CRM-aware suggestions",
    channel: "LinkedIn + email",
    step_count: "5",
    brand: "Porsche Experience",
    tone: "executive",
    segment: "SMB",
    initiative: "AI follow-ups",
    cost: "$2k/month",
    time_saving: "10 hrs/week"
  };
  vars.forEach(v=>{
    const key = v.replace(/\W/g,'');
    text = text.replaceAll(`{${key}}`, examples[key] || `{${key}}`);
  });
  document.getElementById('template').value = text;
}

async function run(){
  const p = document.getElementById('template').value.trim();
  const out = document.getElementById('out');
  if(!p){ out.textContent = 'Select a template first.'; return; }
  out.textContent = 'Thinking…';
  try{
    const res = await fetch(API_URL, {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ prompt: p })
    });
    if(!res.ok) throw new Error('HTTP '+res.status);
    const data = await res.json();
    const b = data.brief || {};
    const list = arr => (arr||[]).map(x=>`- ${x}`).join('\n');
    out.textContent = `
${data.prompt ? 'Prompt: '+data.prompt+'\n\n' : ''}
Problem
${list(b.problem)}

Users
${list(b.users)}

Solution
${list(b.solution)}

Value
${list(b.value)}

Risks
${list(b.risks)}

Next Actions
${list(b.next_actions)}
`.trim();
  }catch(e){
    out.textContent = 'Error: '+e.message;
  }
}

function copyOut(){
  const t = document.getElementById('out').textContent;
  navigator.clipboard.writeText(t);
}

function downloadOut(){
  const blob = new Blob([document.getElementById('out').textContent], {type:'text/markdown'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'prompt-brief.md'; a.click();
  URL.revokeObjectURL(url);
}

// Init
loadCat('strategy');
</script>
</body>
</html>
